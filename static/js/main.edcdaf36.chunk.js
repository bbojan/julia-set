(this["webpackJsonpjulia-set"]=this["webpackJsonpjulia-set"]||[]).push([[0],{13:function(e,t,n){var r,c=n(9).wrap,u=n(22);e.exports=function e(){return this instanceof e?c(u()):r||(r=c(u()))}},18:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){e.exports=function(){return new Worker(n.p+"79da9ee58e17e2f21f89.worker.js")}},23:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),u=n(11),a=n.n(u),i=(n(18),n(19),n(2));function o(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current&&(t.current=e.current.getContext("2d"))}),[]),{canvasRef:e,ctxRef:t}}function s(e){var t=function(e,t){var n=Object(r.useRef)(50),c=Object(r.useRef)(50),u=Object(r.useRef)(!1);return Object(r.useEffect)((function(){var r=e.current;return r&&(r.onmousedown=function(e){var r=n.current,a=c.current,i=e.offsetX||0,o=e.offsetY||0;t({x:r,y:a,ex:i,ey:o})&&(u.current=!0,document.body.style.cursor="grabbing")},window.onmousemove=function(e){u.current&&(n.current=e.pageX,c.current=e.pageY)},window.onmouseup=function(e){u.current=!1,document.body.style.cursor="grab"}),function(){r&&(r.onmousedown=null,window.onmousemove=null,window.onmouseup=null)}}),[]),{xRef:n,yRef:c}}(e,(function(e){var t=e.x,n=e.y,r=e.ex,c=e.ey;return Math.sqrt((t-r)*(t-r)+(n-c)*(n-c))<40}));return{xRef:t.xRef,yRef:t.yRef,radius:40}}var f=640;function j(e,t){var n=t.xRef,r=t.yRef,c=t.radius,u=n.current,a=r.current;e.beginPath(),e.arc(u,a,c,0,2*Math.PI),e.fillStyle="yellow",e.fill()}function l(e,t){var n=document.title.split(",");if(e){var r=document.title.split(",");document.title="".concat(r[0]||"",",  FRACTAL ").concat((1e3/t).toFixed(1)," FPS")}else document.title="UI ".concat((1e3/t).toFixed(1)," FPS  ,").concat(n[1]||"")}var b=n(3),d=n.n(b),h=n(4),p=function(e){return new Promise((function(t){setTimeout((function(){t(e)}),e)}))};function v(e){var t=Object(r.useRef)(0),n=Object(r.useRef)(0);Object(r.useEffect)((function(){var r=function(){var c=Object(h.a)(d.a.mark((function c(u){var a;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0===n.current){c.next=4;break}return a=u-n.current,c.next=4,e(a,u);case 4:n.current=u,t.current=requestAnimationFrame(r);case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return t.current=requestAnimationFrame(r),function(){return cancelAnimationFrame(t.current)}}),[])}var O=n(0),x=Object(r.memo)((function(e){var t=o(),n=t.canvasRef;return function(e,t,n,c){Object(r.useRef)(c||0).current=c||0,v(function(){var r=Object(h.a)(d.a.mark((function r(c){var u,a,i,o,s;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.current){r.next=3;break}return r.abrupt("return");case 3:if(i=t.current){r.next=6;break}return r.abrupt("return");case 6:return o=(null===(u=e.current)||void 0===u?void 0:u.width)||1,s=(null===(a=e.current)||void 0===a?void 0:a.height)||1,i.clearRect(0,0,o,s),j(i,n),l(!1,c),r.abrupt("return",Promise.resolve());case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}(n,t.ctxRef,s(n),1),Object(O.jsx)("canvas",{ref:n,width:f,height:f,style:{position:"absolute",top:0,left:0,bottom:0}})})),m=n(6),w=n(12),g=n.n(w);function y(e){for(var t=e.height,n=e.width,r=e.creal,c=e.cimag,u=e.factor,a=Math.floor(u||0),i=n,o=t,s=i/4,f=o/4,j=new Uint8ClampedArray(i*o*4),l=function(){for(var e=[],t=0;t<9;t++){var n=31*t;e[t]=[n,n,255,255],e[t+8]=[0,255,n,255],e[17+t]=[n,0,0,255]}return e}(),b=0,d=0;d<o;d++)for(var h=0;h<i;h++){var p=h/f-2,v=d/s-2,O=0;do{var x=p*p-v*v+r;v=2*p*v+c,p=x,O++}while(p*p+v*v<4&&O<25);var m=l[O];j[b+0]=m[0],j[b+1]=m[1],j[b+2]=m[2],j[b+3]=m[3],b+=4}return g()(j,i,o,a),j}function k(e){return{creal:.6*Math.sin(e/(3.14*20))-.8,cimag:.156+.4*Math.cos(e/(3.14*40))}}var R=Object(r.memo)((function(e){var t=o(),n=t.canvasRef;return function(e,t,n){var c=Object(r.useRef)(0),u=Object(r.useRef)(n||0);u.current=n||0,v(function(){var n=Object(h.a)(d.a.mark((function n(r){var a,i,o,s,f,j,b;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.current){n.next=3;break}return n.abrupt("return");case 3:if(i=t.current){n.next=6;break}return n.abrupt("return");case 6:return o={width:(null===a||void 0===a?void 0:a.width)||960,height:(null===a||void 0===a?void 0:a.height)||540,factor:u.current},c.current=c.current+1,s=k(c.current),f=Object(m.a)(Object(m.a)({},o),s),j=y(f),b=new ImageData(j,o.width,o.height),i.putImageData(b,0,0),l(!0,r),n.abrupt("return",Promise.resolve());case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}(n,t.ctxRef,e.factor),Object(O.jsx)("canvas",{ref:n,width:f,height:f})})),S=n(13),F=n.n(S).a;function M(){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=new F;return e.current=t,function(){var n=t;n&&(p(1).then(Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.terminate();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))),e.current=null)}}),[]),e}var P=Object(r.memo)((function(e){var t=o(),n=t.canvasRef;return function(e,t,n){var c=Object(r.useRef)(0),u=Object(r.useRef)(n||0);u.current=n||0;var a=M(),i=Object(r.useRef)(!1),o=Object(r.useRef)(null);v(function(){var n=Object(h.a)(d.a.mark((function n(r){var s,f,j,b,h,p,v,O;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a.current){n.next=3;break}return n.abrupt("return");case 3:if(f=e.current){n.next=6;break}return n.abrupt("return");case 6:if(j=t.current){n.next=9;break}return n.abrupt("return");case 9:if(b={width:(null===f||void 0===f?void 0:f.width)||960,height:(null===f||void 0===f?void 0:f.height)||540,factor:u.current},c.current=c.current+1,h=k(c.current),p=Object(m.a)(Object(m.a)({},b),h),i.current){n.next=19;break}return i.current=!0,n.next=17,s.calculate(p);case 17:o.current=n.sent,i.current=!1;case 19:return(v=o.current)&&(O=new ImageData(v,b.width,b.height),j.putImageData(O,0,0)),l(!0,r),n.abrupt("return",Promise.resolve());case 23:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}(n,t.ctxRef,e.factor),Object(O.jsx)("canvas",{ref:n,width:f,height:f})})),A=Object(r.memo)((function(){var e,t,n=Object(r.useState)(0),c=Object(i.a)(n,2),u=c[0],a=c[1];e=1,t=function(){a((function(e){return e+1}))},Object(r.useEffect)((function(){var n=setInterval(t,e);return function(){clearInterval(n)}}),[]);var o=function(){var e=new Date;return["".concat(e.getHours(),":").concat(e.getMinutes()),"".concat(e.getSeconds(),",").concat(e.getMilliseconds())]}();return Object(O.jsxs)("header",{className:"App-header",children:[Object(O.jsx)("p",{children:"Julia set"}),Object(O.jsx)("p",{children:u}),Object(O.jsx)("p",{children:o[0]}),Object(O.jsx)("p",{children:o[1]})]})})),C=n(9),I=Object(r.memo)((function(){var e=Object(r.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),a=Object(i.a)(u,2),o=a[0],s=a[1],f=M(),j=5e9;return Object(r.useEffect)((function(){var e=f.current;if(e){e.expensiveOperation({value:j},C.proxy((function(e){return c(e)})),C.proxy((function(e){return p(1).then((function(){return 3*e}))}))).then((function(e){return s(e.result.toFixed())}))}}),[]),Object(O.jsxs)("div",{style:{marginTop:16,fontSize:16},children:[Object(O.jsx)("p",{children:"Expensive"}),Object(O.jsx)("p",{children:"Operation"}),Object(O.jsx)("p",{children:"input"}),Object(O.jsx)("p",{children:j}),Object(O.jsx)("p",{children:"done"}),Object(O.jsxs)("p",{children:[Math.ceil(n+1).toFixed()," %"]}),Object(O.jsx)("p",{children:"final result"}),Object(O.jsx)("p",{children:o})]})})),E=function(){var e=Object(r.useMemo)((function(){return Array.from(Array(14).keys())}),[]),t=Object(r.useMemo)((function(){return Array.from(Array(1e4).keys())}),[]),n=Object(r.useState)("main"),c=Object(i.a)(n,2),u=c[0],a=c[1],o=Object(r.useState)(2),s=Object(i.a)(o,2),f=s[0],j=s[1],l=Object(r.useState)(0),b=Object(i.a)(l,2),d=b[0],h=b[1],p=Object(r.useState)(!1),v=Object(i.a)(p,2),m=v[0],w=v[1],g=Object(r.useState)(""),y=Object(i.a)(g,2),k=y[0],S=y[1];return Object(r.useEffect)((function(){fetch("https://unpkg.com/react@17.0.2/umd/react.development.js").then((function(e){return e.text()})).then((function(e){S(e)}))}),[]),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("div",{style:{position:"relative",margin:8},children:["main"===u&&Object(O.jsx)(R,{factor:f}),"worker"===u&&Object(O.jsx)(P,{factor:f}),Object(O.jsx)(x,{})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)(A,{}),Object(O.jsxs)("label",{children:[Object(O.jsx)("p",{children:"Expensive Worker"}),Object(O.jsx)("p",{children:"Operation"}),Object(O.jsx)("input",{name:"expensive",type:"checkbox",checked:m,onChange:function(){return w((function(e){return!e}))}})]}),m&&Object(O.jsx)(I,{})]}),Object(O.jsxs)("div",{style:{width:210},children:[Object(O.jsxs)("div",{style:{marginBottom:40},children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("input",{type:"radio",value:"main",name:"Paint on Main thread",checked:"main"===u,onChange:function(){return a("main")}},"main"),Object(O.jsx)("span",{children:"Paint on Main thread"})]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("input",{type:"radio",value:"worker",name:"Paint on Worker thread",checked:"worker"===u,onChange:function(){return a("worker")}},"worker"),Object(O.jsx)("span",{children:"Paint on Worker thread"})]})]}),Object(O.jsx)("div",{children:e.map((function(e,t){var n=2*e;return Object(O.jsxs)("p",{children:[Object(O.jsx)("input",{type:"radio",value:n,name:"Blur ".concat(n," px"),checked:f===n,onChange:function(){return j(n)}},t),Object(O.jsxs)("span",{children:["Blur ",n," px"]})]},t)}))})]}),Object(O.jsx)("div",{children:Object(O.jsx)("div",{style:{overflowY:"scroll",width:150,height:640},children:t.map((function(e){return Object(O.jsxs)("p",{children:[Object(O.jsx)("input",{type:"radio",value:e,name:"Option ".concat(e),checked:d===e,onChange:function(e){return h(+e.target.value)}},e),Object(O.jsxs)("span",{children:["Option ",e]})]},e)}))})}),Object(O.jsx)("div",{style:{overflowY:"scroll",width:400,height:640},dangerouslySetInnerHTML:{__html:k}})]})};var D=function(){return Object(O.jsx)(E,{})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,u=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),u(e),a(e)}))};a.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(D,{})}),document.getElementById("root")),T()}},[[23,1,2]]]);
//# sourceMappingURL=main.edcdaf36.chunk.js.map