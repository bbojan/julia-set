(this["webpackJsonpjulia-set"]=this["webpackJsonpjulia-set"]||[]).push([[0],{11:function(e,t,n){!function(n){function r(e){if(!(this instanceof r))return new r(e);var t=e.width,n=e.height,c=[[-1,0,1],[-2,0,2],[-1,0,1]],a=[[-1,-2,-1],[0,0,0],[1,2,1]],u=[],i=[];function o(e){return function(n,r,c){return e[4*(t*r+n)+(c=c||0)]}}var s,f,j=o(e.data);for(f=0;f<n;f++)for(s=0;s<t;s++){var b=(j(s,f,0)+j(s,f,1)+j(s,f,2))/3;i.push(b,b,b,255)}for(j=o(i),f=0;f<n;f++)for(s=0;s<t;s++){var l=c[0][0]*j(s-1,f-1)+c[0][1]*j(s,f-1)+c[0][2]*j(s+1,f-1)+c[1][0]*j(s-1,f)+c[1][1]*j(s,f)+c[1][2]*j(s+1,f)+c[2][0]*j(s-1,f+1)+c[2][1]*j(s,f+1)+c[2][2]*j(s+1,f+1),h=a[0][0]*j(s-1,f-1)+a[0][1]*j(s,f-1)+a[0][2]*j(s+1,f-1)+a[1][0]*j(s-1,f)+a[1][1]*j(s,f)+a[1][2]*j(s+1,f)+a[2][0]*j(s-1,f+1)+a[2][1]*j(s,f+1)+a[2][2]*j(s+1,f+1),d=Math.sqrt(l*l+h*h)>>>0;u.push(d,d,d,255)}var p=u;return"function"===typeof Uint8ClampedArray&&(p=new Uint8ClampedArray(u)),p.toImageData=function(){return r.toImageData(p,t,n)},p}function c(e,t,n){return{width:t,height:n,data:e}}r.toImageData=function(e,t,n){if("function"===typeof ImageData&&"[object Uint16Array]"===Object.prototype.toString.call(e))return new ImageData(e,t,n);if("object"===typeof window&&"object"===typeof window.document){var r=document.createElement("canvas");if("function"===typeof r.getContext){var a=r.getContext("2d").createImageData(t,n);return a.data.set(e),a}return new c(e,t,n)}return new c(e,t,n)},e.exports&&(t=e.exports=r),t.Sobel=r,t.FakeImageData=c}()},15:function(e,t,n){var r,c=n(9).wrap,a=n(27);e.exports=function e(){return this instanceof e?c(a()):r||(r=c(a()))}},20:function(e,t,n){},21:function(e,t,n){},27:function(e,t,n){e.exports=function(){return new Worker(n.p+"d8c8829f7b91d45d3a22.worker.js")}},28:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(12),u=n.n(a),i=(n(20),n(21),n(2)),o=n(13),s=n.n(o);function f(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current&&(t.current=e.current.getContext("2d"))}),[]),{canvasRef:e,ctxRef:t}}function j(e){var t=function(e,t){var n=Object(r.useRef)(50),c=Object(r.useRef)(50),a=Object(r.useRef)(!1);return Object(r.useEffect)((function(){var r=e.current;return r&&(r.style.cursor="grab",r.onmousedown=function(e){var u=n.current,i=c.current,o=e.offsetX||0,s=e.offsetY||0;t({x:u,y:i,ex:o,ey:s})&&(a.current=!0,r&&(r.style.cursor="grabbing"))},window.onmousemove=function(e){a.current&&(n.current=e.pageX,c.current=e.pageY)},window.onmouseup=function(e){a.current=!1,r&&(r.style.cursor="grab")}),function(){r&&(r.onmousedown=null,window.onmousemove=null,window.onmouseup=null)}}),[e,t]),{xRef:n,yRef:c}}(e,Object(r.useCallback)((function(e){var t=e.x,n=e.y,r=e.ex,c=e.ey;return Math.sqrt((t-r)*(t-r)+(n-c)*(n-c))<40}),[40]));return{xRef:t.xRef,yRef:t.yRef,radius:40}}var b=640;function l(e,t){var n=t.xRef,r=t.yRef,c=t.radius,a=n.current,u=r.current;e.beginPath(),e.arc(a,u,c,0,2*Math.PI),e.fillStyle="yellow",e.fill()}function h(e,t){var n=document.title.split(",");if(e){var r=document.title.split(",");document.title="".concat(r[0]||"",",  FRACTAL ").concat((1e3/t).toFixed(1)," FPS")}else document.title="UI ".concat((1e3/t).toFixed(1)," FPS  ,").concat(n[1]||"")}var d=n(3),p=n.n(d),O=n(4),v=function(e){return new Promise((function(t){setTimeout((function(){t(e)}),e)}))};function x(e){var t=Object(r.useRef)(0),n=Object(r.useRef)(0);Object(r.useEffect)((function(){var r=function(){var c=Object(O.a)(p.a.mark((function c(a){var u;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0===n.current){c.next=4;break}return u=a-n.current,c.next=4,e(u,a);case 4:n.current=a,t.current=requestAnimationFrame(r);case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return t.current=requestAnimationFrame(r),function(){return cancelAnimationFrame(t.current)}}),[e])}var m=n(0),g=Object(r.memo)((function(e){var t=f(),n=t.canvasRef;return function(e,t,n,c){Object(r.useRef)(c||0).current=c||0,x(Object(r.useCallback)(function(){var r=Object(O.a)(p.a.mark((function r(c){var a,u,i,o;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.current){r.next=3;break}return r.abrupt("return");case 3:if(u=t.current){r.next=6;break}return r.abrupt("return");case 6:return i=a.width,o=a.height,u.clearRect(0,0,i,o),l(u,n),h(!1,c),r.abrupt("return",Promise.resolve());case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[e,t,n]))}(n,t.ctxRef,j(n),1),Object(m.jsx)("canvas",{ref:n,width:b,height:b,style:{position:"absolute",top:0,left:0,bottom:0}})})),w=n(6),y=n(14),k=n.n(y),R=n(11),S=n.n(R);function C(e){for(var t=e.height,n=e.width,r=e.creal,c=e.cimag,a=e.factor,u=e.edge,i=Math.floor(a||0),o=n,s=t,f=o/4,j=s/4,b=new Uint8ClampedArray(o*s*4),l=function(){for(var e=[],t=0;t<9;t++){var n=31*t;e[t]=[n,n,255,255],e[t+8]=[0,255,n,255],e[17+t]=[n,0,0,255]}return e}(),h=0,d=0;d<s;d++)for(var p=0;p<o;p++){var O=p/j-2,v=d/f-2,x=0;do{var m=O*O-v*v+r;v=2*O*v+c,O=m,x++}while(O*O+v*v<4&&x<25);var g=l[x];b[h+0]=g[0],b[h+1]=g[1],b[h+2]=g[2],b[h+3]=g[3],h+=4}return k()(b,o,s,i),u?S()(S.a.FakeImageData(b,o,s)):b}function I(e){return{creal:.6*Math.sin(e/(3.14*20))-.8,cimag:.156+.4*Math.cos(e/(3.14*40))}}var F=Object(r.memo)((function(e){var t=f(),n=t.canvasRef;return function(e,t,n,c){var a=Object(r.useRef)(0),u=Object(r.useRef)(n||0);u.current=n||0;var i=Object(r.useRef)(c);i.current=c,x(Object(r.useCallback)(function(){var n=Object(O.a)(p.a.mark((function n(r){var c,o,s,f,j,b,l,d,O;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=e.current){n.next=3;break}return n.abrupt("return");case 3:if(o=t.current){n.next=6;break}return n.abrupt("return");case 6:return s=c.width,f=c.height,j={width:s||960,height:f||540,factor:u.current,edge:i.current},a.current=a.current+1,b=I(a.current),l=Object(w.a)(Object(w.a)({},j),b),d=C(l),O=new ImageData(d,j.width,j.height),o.putImageData(O,0,0),h(!0,r),n.abrupt("return",Promise.resolve());case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]))}(n,t.ctxRef,e.factor,e.edge),Object(m.jsx)("canvas",{ref:n,width:b,height:b})})),A=n(15),M=n.n(A).a;function D(){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=new M;return e.current=t,function(){var n=t;n&&(v(1).then(Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.terminate();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))),e.current=null)}}),[]),e}var P=Object(r.memo)((function(e){var t=f(),n=t.canvasRef;return function(e,t,n,c){var a=Object(r.useRef)(0),u=Object(r.useRef)(n||0);u.current=n||0;var i=Object(r.useRef)(c);i.current=c;var o=D(),s=Object(r.useRef)(!1),f=Object(r.useRef)(null);x(Object(r.useCallback)(function(){var n=Object(O.a)(p.a.mark((function n(r){var c,j,b,l,d,O,v,x,m,g;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=o.current){n.next=3;break}return n.abrupt("return");case 3:if(j=e.current){n.next=6;break}return n.abrupt("return");case 6:if(b=t.current){n.next=9;break}return n.abrupt("return");case 9:if(l=j.width,d=j.height,O={width:l||960,height:d||540,factor:u.current,edge:i.current},a.current=a.current+1,v=I(a.current),x=Object(w.a)(Object(w.a)({},O),v),s.current){n.next=20;break}return s.current=!0,n.next=18,c.calculate(x);case 18:f.current=n.sent,s.current=!1;case 20:return(m=f.current)&&(g=new ImageData(m,O.width,O.height),b.putImageData(g,0,0)),h(!0,r),n.abrupt("return",Promise.resolve());case 24:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e,o]))}(n,t.ctxRef,e.factor,e.edge),Object(m.jsx)("canvas",{ref:n,width:b,height:b})})),E=Object(r.memo)((function(){var e,t,n=Object(r.useState)(0),c=Object(i.a)(n,2),a=c[0],u=c[1];e=1,t=function(){u((function(e){return e+1}))},Object(r.useEffect)((function(){var n=setInterval(t,e);return function(){clearInterval(n)}}),[t,e]);var o=function(){var e=new Date;return["".concat(e.getHours(),":").concat(e.getMinutes()),"".concat(e.getSeconds(),",").concat(e.getMilliseconds())]}();return Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsx)("p",{children:"Julia set"}),Object(m.jsx)("p",{children:a}),Object(m.jsx)("p",{children:o[0]}),Object(m.jsx)("p",{children:o[1]})]})})),T=n(9),B=Object(r.memo)((function(){var e=Object(r.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),u=Object(i.a)(a,2),o=u[0],s=u[1],f=D(),j=3e9;return Object(r.useEffect)((function(){var e=f.current;if(e){e.expensiveOperation({value:j},T.proxy((function(e){return c(e)})),T.proxy((function(e){return v(1).then((function(){return 3*e}))}))).then((function(e){return s(e.result.toFixed())}))}}),[j,f]),Object(m.jsxs)("div",{style:{marginTop:16,fontSize:16},children:[Object(m.jsx)("p",{children:"Expensive"}),Object(m.jsx)("p",{children:"Operation"}),Object(m.jsx)("p",{children:"input"}),Object(m.jsx)("p",{children:j}),Object(m.jsx)("p",{children:"done"}),Object(m.jsxs)("p",{children:[Math.ceil(n+1).toFixed()," %"]}),Object(m.jsx)("p",{children:"final result"}),Object(m.jsx)("p",{children:o})]})})),L=function(){var e=Object(r.useMemo)((function(){return Array.from(Array(14).keys())}),[]),t=Object(r.useMemo)((function(){return Array.from(Array(1e4).keys())}),[]),n=Object(r.useState)("main"),c=Object(i.a)(n,2),a=c[0],u=c[1],o=Object(r.useState)(2),f=Object(i.a)(o,2),j=f[0],b=f[1],l=Object(r.useState)(0),h=Object(i.a)(l,2),d=h[0],p=h[1],O=Object(r.useState)(!1),v=Object(i.a)(O,2),x=v[0],w=v[1],y=Object(r.useState)(!1),k=Object(i.a)(y,2),R=k[0],S=k[1],C=Object(r.useState)(""),I=Object(i.a)(C,2),A=I[0],M=I[1];return Object(r.useEffect)((function(){fetch("https://unpkg.com/react@17.0.2/umd/react.development.js").then((function(e){return e.text()})).then((function(e){M(e)}))}),[]),Object(m.jsxs)("div",{className:"App",children:[Object(m.jsxs)("div",{style:{position:"relative",margin:8},children:["main"===a&&Object(m.jsx)(F,{factor:j,edge:R}),"worker"===a&&Object(m.jsx)(P,{factor:j,edge:R}),Object(m.jsx)(g,{})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(E,{}),Object(m.jsxs)("label",{children:[Object(m.jsx)("p",{children:"Expensive Worker"}),Object(m.jsx)("p",{children:"Operation"}),Object(m.jsx)("input",{name:"expensive",type:"checkbox",checked:x,onChange:function(){return w((function(e){return!e}))}})]}),x&&Object(m.jsx)(B,{})]}),Object(m.jsxs)("div",{style:{width:210},children:[Object(m.jsxs)("div",{style:{marginBottom:40},children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("input",{type:"radio",value:"main",name:"Paint on Main thread",checked:"main"===a,onChange:function(){return u("main")}},"main"),Object(m.jsx)("span",{children:"Paint on Main thread"})]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("input",{type:"radio",value:"worker",name:"Paint on Worker thread",checked:"worker"===a,onChange:function(){return u("worker")}},"worker"),Object(m.jsx)("span",{children:"Paint on Worker thread"})]})]}),Object(m.jsx)("div",{children:Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"Edge (SLOW)"}),Object(m.jsx)("input",{name:"edge",type:"checkbox",checked:R,onChange:function(){return S((function(e){return!e}))}})]})}),Object(m.jsx)("div",{children:e.map((function(e,t){var n=2*e;return Object(m.jsxs)("p",{children:[Object(m.jsx)("input",{type:"radio",value:n,name:"Blur ".concat(n," px"),checked:j===n,onChange:function(){return b(n)}},t),Object(m.jsxs)("span",{children:["Blur ",n," px"]})]},t)}))})]}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{style:{overflowY:"scroll",width:150,height:640},children:Object(m.jsx)(s.a,{type:"uniform",useStaticSize:!0,itemSizeGetter:function(){return 30},length:t.length,itemRenderer:function(e){var n=t[e];return Object(m.jsxs)("p",{children:[Object(m.jsx)("input",{type:"radio",value:n,name:"Option ".concat(n),checked:d===n,onChange:function(e){return p(+e.target.value)}},n),Object(m.jsxs)("span",{children:["Option ",n]})]},n)}})})}),Object(m.jsx)("div",{style:{overflowY:"scroll",width:400,height:640},dangerouslySetInnerHTML:{__html:A}})]})};var U=function(){return Object(m.jsx)(L,{})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};u.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(U,{})}),document.getElementById("root")),W()}},[[28,1,2]]]);
//# sourceMappingURL=main.a29de0c9.chunk.js.map